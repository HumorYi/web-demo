 <!DOCTYPE html>
 <html lang="en">
 <head>
 	<meta charset="UTF-8">
 	<title>Document</title>
 	<style type="text/css">
		#div1{ position: absolute; width: 100px; height: 100px; background: red; }
		#div2{ position: relative; width: 400px; height: 400px; background: #ccc; }
 	</style>
 	<script type="text/javascript">
 		window.onload = function(){
 			var oDiv = document.getElementById('div1');
 			var oDiv2 = document.getElementById('div2');

 			var disX = 0;
 			var disY = 0;

 			oDiv.onmousedown = function(ev){
 				var oEvent = ev || event;

 				disX = oEvent.clientX - oDiv.offsetLeft;
 				disY = oEvent.clientY - oDiv.offsetTop;

 				document.onmousemove = function(ev){
	 				var oEvent = ev || event;
	 				var l = oEvent.clientX - disX;
 					var t = oEvent.clientY - disY;

 					if (l < 0 ) {
 						l = 0;
 					}else if (l > oDiv2.clientWidth - oDiv.offsetWidth) {
 						l = oDiv2.clientWidth - oDiv.offsetWidth;
 					}

 					if (t < 0) {
 						t = 0;
 					}else if (t > oDiv2.clientHeight - oDiv.offsetHeight) {
 						t = oDiv2.clientHeight - oDiv.offsetHeight;
 					}
	 				oDiv.style.left = l + 'px';
	 				oDiv.style.top = t + 'px';
 				} 			

	 			document.onmouseup = function(){
	 				document.onmousemove = null;
	 				document.onmouseup = null;
	 			}

	 			return false; //阻止拖拽事件，兼容FF
 			}
 		}
 	</script>
 </head>
 <body>
 	<div id="div2">
 		<div id="div1"></div>
 	</div>
 </body>
 </html>